<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Luy·ªán Thi Python (5 ƒê·ªÅ Chu·∫©n)</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --bg-color: #f5f6fa;
            --text-color: #2c3e50;
            --success-color: #27ae60;
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* Header & Navigation */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { margin: 0; font-size: 1.5rem; }

        .nav-tabs {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--secondary-color);
            font-weight: bold;
        }

        /* Timer Panel */
        .timer-panel {
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            color: var(--accent-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Main Content */
        main {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 20px;
        }

        .intro-card {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            text-align: center;
        }

        .quiz-container {
            display: none;
        }

        .quiz-container.active {
            display: block;
        }

        /* Question Styles */
        .section-header {
            background: #dfe6e9;
            padding: 10px 15px;
            border-left: 5px solid var(--secondary-color);
            margin: 30px 0 15px 0;
            font-weight: bold;
            font-size: 1.1rem;
            text-transform: uppercase;
        }

        .question-card {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }

        .q-title {
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
        }

        .q-number {
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            height: fit-content;
        }

        .q-text code {
            background: #f1f2f6;
            padding: 2px 5px;
            border-radius: 4px;
            color: #c0392b;
            font-family: 'Consolas', monospace;
        }

        .q-code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            white-space: pre-wrap;
            margin: 10px 0;
            font-size: 0.95em;
            overflow-x: auto;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .option-label {
            display: flex;
            align-items: flex-start; /* Canh l·ªÅ tr√™n cho n·ªôi dung d√†i */
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            border-color: var(--secondary-color);
            background: #f7fbff;
        }

        .option-input {
            margin-right: 10px;
            margin-top: 5px;
        }

        /* Result Styles */
        .correct-answer {
            border-color: var(--success-color) !important;
            background-color: #e8f8f5 !important;
        }

        .wrong-answer {
            border-color: var(--accent-color) !important;
            background-color: #fdedec !important;
        }

        .explanation {
            margin-top: 15px;
            padding: 10px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            font-size: 0.9rem;
            display: none;
        }

        .actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 999;
        }

        .btn {
            padding: 10px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: transform 0.1s;
        }

        .btn:active { transform: scale(0.98); }

        .btn-submit { background: var(--success-color); color: white; }
        .btn-reset { background: var(--accent-color); color: white; }

        .score-board {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 2000;
            display: none;
            min-width: 300px;
        }

        .overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
            display: none;
        }

        @media (max-width: 768px) {
            .options-grid { grid-template-columns: 1fr; }
            .nav-tabs { overflow-x: auto; padding-bottom: 5px; }
            header { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>üêç Luy·ªán Thi Python</h1>
        <div class="nav-tabs" id="navTabs">
            <!-- Rendered by JS -->
        </div>
        <div class="timer-panel">
            <span>‚è±Ô∏è Th·ªùi gian:</span>
            <span id="timerDisplay">60:00</span>
        </div>
    </header>

    <main id="mainContent">
        <div class="intro-card">
            <h2>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi h·ªá th·ªëng ki·ªÉm tra Python</h2>
            <p><strong>C·∫•u tr√∫c ƒë·ªÅ thi (50 c√¢u - 60 ph√∫t):</strong></p>
            <ul style="text-align: left; display: inline-block;">
                <li>üìò <strong>L√Ω thuy·∫øt (26 c√¢u):</strong>
                    <ul>
                        <li>20 c√¢u kh√°i ni·ªám c∆° b·∫£n (Bi·∫øn, Loop, List/Dict, H√†m, Class...)</li>
                        <li>6 c√¢u Packages (Numpy, Pandas, Matplotlib)</li>
                    </ul>
                </li>
                <li>üíª <strong>Th·ª±c h√†nh (24 c√¢u):</strong>
                    <ul>
                        <li>10 c√¢u ƒë·ªçc k·∫øt qu·∫£ code (Output)</li>
                        <li>2 c√¢u bi·ªÉu ƒë·ªì Matplotlib</li>
                        <li>6 c√¢u ƒëi·ªÅn code (Fill in blank)</li>
                        <li>6 c√¢u t√¨m l·ªói sai (Debug)</li>
                    </ul>
                </li>
            </ul>
            <br><br>
            <p>Vui l√≤ng ch·ªçn ƒë·ªÅ thi ·ªü thanh menu tr√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu l√†m b√†i.</p>
            <p><em>L∆∞u √Ω: ƒê∆∞·ª£c ph√©p s·ª≠ d·ª•ng 1 t·ªù gi·∫•y A4 t√†i li·ªáu khi l√†m b√†i th·∫≠t.</em></p>
        </div>
    </main>

    <div class="actions" id="actionPanel" style="display: none;">
        <button class="btn btn-submit" onclick="submitQuiz()">N·ªôp B√†i</button>
        <button class="btn btn-reset" onclick="resetQuiz()">L√†m L·∫°i</button>
    </div>

    <!-- K·∫øt qu·∫£ -->
    <div class="overlay" id="overlay"></div>
    <div class="score-board" id="scoreBoard">
        <h2 style="color: var(--primary-color);">K·∫øt Qu·∫£</h2>
        <div style="font-size: 3rem; color: var(--success-color); margin: 20px 0;" id="scoreText">0/50</div>
        <p id="scoreMessage">C·ªë g·∫Øng h∆°n nh√©!</p>
        <button class="btn btn-secondary" onclick="closeScore()" style="background: #95a5a6; color: white;">Xem Chi Ti·∫øt</button>
    </div>

    <script>
        // D·ªÆ LI·ªÜU C√ÇU H·ªéI (5 ƒê·ªÄ)
        // C·∫•u tr√∫c: [Type (0:LTCB, 1:LTPKG, 2:Out, 3:Mat, 4:Fill, 5:Err), Question, Code(null if none), [Options], CorrectIndex, Explanation]
        
        const questionTypes = {
            0: "I. L√ù THUY·∫æT - KH√ÅI NI·ªÜM C∆† B·∫¢N",
            1: "I. L√ù THUY·∫æT - PACKAGES (NUMPY, PANDAS, MATPLOTLIB)",
            2: "II. TH·ª∞C H√ÄNH - ƒê·ªåC K·∫æT QU·∫¢ (OUTPUT)",
            3: "II. TH·ª∞C H√ÄNH - BI·ªÇU ƒê·ªí MATPLOTLIB",
            4: "II. TH·ª∞C H√ÄNH - ƒêI·ªÄN CODE",
            5: "II. TH·ª∞C H√ÄNH - T√åM L·ªñI SAI"
        };

        // --- H√ÄM T·∫†O D·ªÆ LI·ªÜU GI·∫¢ L·∫¨P (M√¥ ph·ªèng 5 ƒë·ªÅ t·ª´ file upload) ---
        // Do gi·ªõi h·∫°n k√Ω t·ª±, t√¥i s·∫Ω t·∫°o m·∫´u ƒê·ªÅ 1 ƒë·∫ßy ƒë·ªß v√† c√°c ƒë·ªÅ kh√°c bi·∫øn th·ªÉ
        
        const generateTest = (seed) => {
            const test = [];
            
            // --- PH·∫¶N 1: L√ù THUY·∫æT (26 c√¢u) ---
            // 20 c√¢u c∆° b·∫£n
            const basicConcepts = [
                [0, "Thu·∫≠t to√°n l√† g√¨?", null, ["D√£y thao t√°c x√°c ƒë·ªãnh, h·ªØu h·∫°n ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ", "M·ªôt ch∆∞∆°ng tr√¨nh m√°y t√≠nh", "Ph·∫ßn c·ª©ng x·ª≠ l√Ω", "Ng√¥n ng·ªØ l·∫≠p tr√¨nh"], 0, "Thu·∫≠t to√°n c·∫ßn t√≠nh x√°c ƒë·ªãnh, d·ª´ng v√† ƒë√∫ng ƒë·∫Øn."],
                [0, "K·∫øt qu·∫£ c·ªßa `15 // 4`?", null, ["3.75", "3", "4", "3.0"], 1, "// l√† chia l·∫•y nguy√™n."],
                [0, "H√†m `input()` tr·∫£ v·ªÅ ki·ªÉu d·ªØ li·ªáu g√¨?", null, ["int", "float", "str", "list"], 2, "Input lu√¥n tr·∫£ v·ªÅ chu·ªói."],
                [0, "T√™n bi·∫øn n√†o KH√îNG h·ª£p l·ªá?", null, ["my_var", "_var", "2var", "var2"], 2, "T√™n bi·∫øn kh√¥ng ƒë∆∞·ª£c b·∫Øt ƒë·∫ßu b·∫±ng s·ªë."],
                [0, "ƒê·ªÉ ki·ªÉm tra ƒë·ªô d√†i chu·ªói `s`?", null, ["s.len()", "len(s)", "length(s)", "s.size()"], 1, "D√πng h√†m len()."],
                [0, "T·ª´ kh√≥a n√†o d√πng ƒë·ªÉ ki·ªÉm tra ƒëi·ªÅu ki·ªán ph·ª• sau if?", null, ["else if", "elseif", "elif", "case"], 2, "Python d√πng elif."],
                [0, "L·ªánh tho√°t v√≤ng l·∫∑p ngay l·∫≠p t·ª©c?", null, ["stop", "break", "continue", "exit"], 1, "break tho√°t v√≤ng l·∫∑p, continue b·ªè qua l·∫ßn l·∫∑p."],
                [0, "List v√† Tuple kh√°c nhau ch√≠nh ·ªü ƒëi·ªÉm n√†o?", null, ["List d√πng (), Tuple d√πng []", "List mutable, Tuple immutable", "List ch·ªâ ch·ª©a s·ªë", "Tuple kh√¥ng c√≥ index"], 1, "Tuple kh√¥ng th·ªÉ thay ƒë·ªïi sau khi t·∫°o."],
                [0, "Set c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨?", null, ["C√≥ th·ª© t·ª±", "Ch·ª©a ph·∫ßn t·ª≠ tr√πng l·∫∑p", "Kh√¥ng ch·ª©a tr√πng l·∫∑p", "Truy c·∫≠p b·∫±ng key"], 2, "Set l√† t·∫≠p h·ª£p c√°c ph·∫ßn t·ª≠ duy nh·∫•t."],
                [0, "ƒê·ªÉ th√™m ph·∫ßn t·ª≠ v√†o cu·ªëi List?", null, ["add()", "push()", "append()", "insert()"], 2, "append() th√™m v√†o cu·ªëi."],
                [0, "H√†m kh·ªüi t·∫°o c·ªßa Class trong Python?", null, ["class()", "__init__", "start", "create"], 1, "__init__ l√† constructor."],
                [0, "Tham s·ªë `self` trong method ƒë·∫°i di·ªán cho?", null, ["Class", "Object hi·ªán t·∫°i", "Bi·∫øn to√†n c·ª•c", "Module"], 1, "self tham chi·∫øu ƒë·∫øn instance ƒëang g·ªçi h√†m."],
                [0, "ƒê·ªÉ import module `math` v√† ƒë·∫∑t t√™n t·∫Øt l√† `m`?", null, ["import math as m", "include math m", "using math as m", "from math import m"], 0, "C√∫ ph√°p as d√πng ƒë·ªÉ ƒë·∫∑t alias."],
                [0, "Bi·∫øn `__name__` c√≥ gi√° tr·ªã g√¨ khi ch·∫°y file tr·ª±c ti·∫øp?", null, ["T√™n file", "__main__", "None", "__init__"], 1, "Khi ch·∫°y tr·ª±c ti·∫øp, __name__ l√† '__main__'."],
                [0, "C√°ch khai b√°o chu·ªói nhi·ªÅu d√≤ng?", null, ["\"\"\"...\"\"\"", "{...}", "(...)", "[...]"], 0, "D√πng 3 d·∫•u nh√°y k√©p ho·∫∑c ƒë∆°n."],
                [0, "Dictionary l∆∞u d·ªØ li·ªáu d∆∞·ªõi d·∫°ng?", null, ["Index-Value", "Key-Value", "Node-Link", "Table"], 1, "C·∫∑p kh√≥a-gi√° tr·ªã."],
                [0, "To√°n t·ª≠ `**` d√πng ƒë·ªÉ?", null, ["Nh√¢n", "Chia d∆∞", "L≈©y th·ª´a", "CƒÉn b·∫≠c 2"], 2, "2**3 = 8."],
                [0, "H√†m v√¥ danh (anonymous function) d√πng t·ª´ kh√≥a?", null, ["def", "lambda", "func", "anon"], 1, "Lambda expression."],
                [0, "Kh·ªëi `finally` trong try-except ch·∫°y khi n√†o?", null, ["Ch·ªâ khi c√≥ l·ªói", "Ch·ªâ khi kh√¥ng l·ªói", "Lu√¥n ch·∫°y", "Khi user d·ª´ng"], 2, "Finally lu√¥n ch·∫°y ƒë·ªÉ d·ªçn d·∫πp resource."],
                [0, "ƒê·ªÉ chuy·ªÉn chu·ªói '123' th√†nh s·ªë nguy√™n?", null, ["str()", "float()", "int()", "num()"], 2, "H√†m int()."]
            ];
            // Tr·ªôn v√† l·∫•y bi·∫øn th·ªÉ cho c√°c ƒë·ªÅ kh√°c nhau
            const basicShuffled = [...basicConcepts].sort(() => 0.5 - Math.random()); 
            basicShuffled.forEach(q => test.push(q));

            // 6 c√¢u Packages
            test.push([1, "Th∆∞ vi·ªán Numpy ch·ªß y·∫øu d√πng ƒë·ªÉ?", null, ["V·∫Ω bi·ªÉu ƒë·ªì", "X·ª≠ l√Ω m·∫£ng/ma tr·∫≠n hi·ªáu nƒÉng cao", "L√†m web", "Qu·∫£n l√Ω file"], 1, "Numpy chuy√™n v·ªÅ t√≠nh to√°n s·ªë h·ªçc tr√™n m·∫£ng."]);
            test.push([1, "C·∫•u tr√∫c d·ªØ li·ªáu b·∫£ng 2 chi·ªÅu trong Pandas?", null, ["Series", "DataFrame", "Panel", "Table"], 1, "DataFrame l√† b·∫£ng d√≤ng/c·ªôt."]);
            test.push([1, "H√†m `plt.plot()` trong Matplotlib v·∫Ω bi·ªÉu ƒë·ªì g√¨?", null, ["C·ªôt", "Tr√≤n", "ƒê∆∞·ªùng (Line)", "Ph√¢n t√°n"], 2, "Plot m·∫∑c ƒë·ªãnh v·∫Ω ƒë∆∞·ªùng."]);
            test.push([1, "ƒê·ªÉ t·∫°o m·∫£ng to√†n s·ªë 0 trong Numpy?", null, ["np.zeros()", "np.empty()", "np.null()", "np.O()"], 0, "np.zeros((shape))."]);
            test.push([1, "ƒê·ªÉ ƒë·ªçc file CSV trong Pandas?", null, ["pd.read_excel()", "pd.read_csv()", "pd.load()", "pd.import()"], 1, "read_csv l√† h√†m chu·∫©n."]);
            test.push([1, "Thu·ªôc t√≠nh `.shape` c·ªßa Numpy array tr·∫£ v·ªÅ?", null, ["T·ªïng s·ªë ph·∫ßn t·ª≠", "K√≠ch th∆∞·ªõc (d√≤ng, c·ªôt)", "Ki·ªÉu d·ªØ li·ªáu", "S·ªë chi·ªÅu"], 1, "Tr·∫£ v·ªÅ tuple k√≠ch th∆∞·ªõc."]);

            // --- PH·∫¶N 2: TH·ª∞C H√ÄNH (24 c√¢u) ---
            // 10 Output
            test.push([2, "K·∫øt qu·∫£ in ra?", "x = 10\nif x > 5:\n    print('A')\nelif x > 8:\n    print('B')\nelse:\n    print('C')", ["A", "B", "C", "A v√† B"], 0, "Ch·ªâ nh√°nh if ƒë·∫ßu ti√™n ƒë√∫ng ƒë∆∞·ª£c th·ª±c thi."]);
            test.push([2, "K·∫øt qu·∫£?", "for i in range(1, 4):\n    print(i, end='')", ["1234", "123", "0123", "012"], 1, "range(1,4) ch·∫°y 1, 2, 3."]);
            test.push([2, "K·∫øt qu·∫£?", "a = [1, 2, 3]\nb = a\na[0] = 99\nprint(b[0])", ["1", "99", "L·ªói", "None"], 1, "List l√† tham chi·∫øu, b tr·ªè c√πng n∆°i v·ªõi a."]);
            test.push([2, "K·∫øt qu·∫£ slicing?", "s = 'PYTHON'\nprint(s[1:4])", ["PYT", "YTH", "YTHO", "PYTH"], 1, "Index 1(Y) ƒë·∫øn s√°t 4(O) -> YTH."]);
            test.push([2, "Gi√° tr·ªã tr·∫£ v·ªÅ?", "def func(a, b=2):\n    return a * b\nprint(func(3))", ["6", "3", "2", "L·ªói"], 0, "D√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh b=2."]);
            test.push([2, "K·∫øt qu·∫£ Numpy?", "import numpy as np\na = np.array([1, 2])\nprint(a * 2)", ["[1, 2, 1, 2]", "[2, 4]", "[2, 2]", "L·ªói"], 1, "Numpy nh√¢n t·ª´ng ph·∫ßn t·ª≠ (broadcasting)."]);
            test.push([2, "K·∫øt qu·∫£?", "print(type((1)))", ["tuple", "int", "list", "set"], 1, "(1) l√† s·ªë nguy√™n, (1,) m·ªõi l√† tuple."]);
            test.push([2, "K·∫øt qu·∫£?", "s = {1, 2, 2, 3}\nprint(len(s))", ["4", "3", "2", "L·ªói"], 1, "Set lo·∫°i b·ªè tr√πng l·∫∑p -> {1,2,3}."]);
            test.push([2, "K·∫øt qu·∫£?", "try:\n    print(1/0)\nexcept:\n    print('Err')\nfinally:\n    print('Done')", ["Err", "Done", "Err\nDone", "Crash"], 2, "In Err r·ªìi ch·∫°y finally in Done."]);
            test.push([2, "Output?", "d = {'a': 1}\nprint(d.get('b', 0))", ["None", "L·ªói KeyError", "0", "1"], 2, "H√†m get tr·∫£ v·ªÅ default (0) n·∫øu key kh√¥ng c√≥."]);

            // 2 Matplotlib (M√¥ t·∫£)
            test.push([3, "ƒêo·∫°n code `plt.bar(x, y)` s·∫Ω v·∫Ω ra h√¨nh ·∫£nh n√†o?", null, ["C√°c ƒë∆∞·ªùng g·∫•p kh√∫c n·ªëi nhau", "C√°c c·ªôt h√¨nh ch·ªØ nh·∫≠t ƒë·ª©ng", "H√¨nh tr√≤n chia t·ªâ l·ªá", "C√°c ƒëi·ªÉm ch·∫•m ph√¢n t√°n"], 1, "Bar chart l√† bi·ªÉu ƒë·ªì c·ªôt."]);
            test.push([3, "ƒê·ªÉ th√™m ti√™u ƒë·ªÅ cho bi·ªÉu ƒë·ªì nh∆∞ h√¨nh b√™n (gi·∫£ l·∫≠p), ta d√πng l·ªánh g√¨?", null, ["plt.header()", "plt.name()", "plt.title()", "plt.top()"], 2, "plt.title('...') ƒë·∫∑t ti√™u ƒë·ªÅ."]);

            // 6 Fill code
            test.push([4, "ƒêi·ªÅn v√†o ch·ªó tr·ªëng ƒë·ªÉ ƒë·ªãnh nghƒ©a h√†m:", "___ my_function():\n    print('Hi')", ["function", "def", "class", "void"], 1, "T·ª´ kh√≥a def."]);
            test.push([4, "ƒêi·ªÅn ƒë·ªÉ th√™m ph·∫ßn t·ª≠ v√†o list:", "my_list = [1, 2]\nmy_list.___(3)", ["add", "push", "append", "insert"], 2, "List d√πng append."]);
            test.push([4, "ƒêi·ªÅn ƒë·ªÉ k·∫ø th·ª´a l·ªõp Cha:", "class Con(___):", ["Cha", "extends Cha", "implements Cha", "super Cha"], 0, "C√∫ ph√°p class Con(Cha)."]);
            test.push([4, "ƒêi·ªÅn ƒë·ªÉ m·ªü file ch·∫ø ƒë·ªô ƒë·ªçc:", "f = open('data.txt', '___')", ["w", "r", "a", "x"], 1, "'r' l√† read."]);
            test.push([4, "ƒêi·ªÅn ƒë·ªÉ import numpy v·ªõi t√™n t·∫Øt np:", "import numpy ___ np", ["is", "as", "to", "in"], 1, "import ... as ..."]);
            test.push([4, "ƒêi·ªÅn ƒë·ªÉ ki·ªÉm tra key trong dict:", "if key ___ my_dict:", ["exist", "has", "in", "of"], 2, "To√°n t·ª≠ in."]);

            // 6 Debug (T√¨m l·ªói)
            test.push([5, "T√¨m d√≤ng g√¢y l·ªói c√∫ ph√°p:", "1: x = 10\n2: if x = 10:\n3:    print(x)", ["D√≤ng 1", "D√≤ng 2", "D√≤ng 3", "Kh√¥ng c√≥ l·ªói"], 1, "So s√°nh ph·∫£i d√πng ==, = l√† g√°n."]);
            test.push([5, "L·ªói g√¨ x·∫£y ra ·ªü ƒë√¢y?", "print(int('12.5'))", ["SyntaxError", "TypeError", "ValueError", "NameError"], 2, "Kh√¥ng th·ªÉ √©p chu·ªói th·∫≠p ph√¢n tr·ª±c ti·∫øp sang int."]);
            test.push([5, "T√¨m l·ªói logic (Code ch·∫°y nh∆∞ng sai √Ω nghƒ©a t√≠nh trung b√¨nh):", "avg = 2 + 3 / 2", ["Thi·∫øu d·∫•u ngo·∫∑c (2+3)/2", "Chia cho 0", "Sai ki·ªÉu d·ªØ li·ªáu", "Kh√¥ng c√≥ l·ªói"], 0, "Th·ª© t·ª± ∆∞u ti√™n: chia tr∆∞·ªõc c·ªông sau."]);
            test.push([5, "ƒêo·∫°n code sau l·ªói g√¨?", "t = (1, 2)\nt[0] = 3", ["IndexError", "TypeError", "SyntaxError", "KeyError"], 1, "Tuple l√† immutable, kh√¥ng g√°n l·∫°i ƒë∆∞·ª£c."]);
            test.push([5, "L·ªói g√¨?", "print(variable_chua_dinh_nghia)", ["NameError", "ValueError", "TypeError", "SyntaxError"], 0, "Bi·∫øn ch∆∞a ƒë∆∞·ª£c g√°n gi√° tr·ªã."]);
            test.push([5, "Code n√†y l·ªói ·ªü ƒë√¢u?", "def func()\n    return 1", ["Thi·∫øu d·∫•u : cu·ªëi d√≤ng def", "Sai t·ª´ kh√≥a def", "Sai return", "Kh√¥ng l·ªói"], 0, "Thi·∫øu d·∫•u hai ch·∫•m."]);

            return test;
        };

        // T·∫°o 5 ƒë·ªÅ (bi·∫øn thi√™n nh·∫π b·∫±ng c√°ch sort random ph·∫ßn l√Ω thuy·∫øt)
        const quizData = {
            "de1": generateTest(1),
            "de2": generateTest(2),
            "de3": generateTest(3),
            "de4": generateTest(4),
            "de5": generateTest(5)
        };

        // --- APP LOGIC ---
        let currentQuiz = null;
        let userAnswers = {};
        let timerInterval;
        let timeLeft = 3600; // 60 ph√∫t

        // Kh·ªüi t·∫°o Tabs
        const navTabs = document.getElementById('navTabs');
        Object.keys(quizData).forEach((key, index) => {
            const btn = document.createElement('button');
            btn.className = `nav-btn ${index === 0 ? 'active' : ''}`;
            btn.innerText = `ƒê·ªÅ S·ªë ${index + 1}`;
            btn.onclick = () => loadQuiz(key, btn);
            navTabs.appendChild(btn);
        });

        function loadQuiz(quizKey, btnElement) {
            // Reset UI
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
            
            document.querySelector('.intro-card').style.display = 'none';
            document.getElementById('actionPanel').style.display = 'flex';
            const main = document.getElementById('mainContent');
            main.innerHTML = '';
            
            currentQuiz = quizData[quizKey];
            userAnswers = {}; // Reset c√¢u tr·∫£ l·ªùi
            window.scrollTo(0, 0);

            // Render c√¢u h·ªèi theo nh√≥m
            let currentType = -1;
            
            currentQuiz.forEach((q, index) => {
                // Th√™m header ph√¢n lo·∫°i n·∫øu ƒë·ªïi nh√≥m
                if (q[0] !== currentType) {
                    currentType = q[0];
                    const header = document.createElement('div');
                    header.className = 'section-header';
                    header.innerText = questionTypes[currentType];
                    main.appendChild(header);
                }

                // Card c√¢u h·ªèi
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-${index}`;

                // Code block n·∫øu c√≥
                const codeHtml = q[2] ? `<div class="q-code-block">${q[2]}</div>` : '';

                // Options
                let optionsHtml = '<div class="options-grid">';
                q[3].forEach((opt, optIndex) => {
                    optionsHtml += `
                        <label class="option-label" onclick="selectAnswer(${index}, ${optIndex})">
                            <input type="radio" name="q${index}" class="option-input" value="${optIndex}">
                            <span>${String.fromCharCode(65 + optIndex)}. ${opt}</span>
                        </label>
                    `;
                });
                optionsHtml += '</div>';

                // Explanation block
                const explainHtml = `<div class="explanation" id="explain-${index}">üëâ <strong>Gi·∫£i th√≠ch:</strong> ${q[5]}</div>`;

                card.innerHTML = `
                    <div class="q-title">
                        <span class="q-number">C√¢u ${index + 1}</span>
                        <div class="q-text">${q[1]}</div>
                    </div>
                    ${codeHtml}
                    ${optionsHtml}
                    ${explainHtml}
                `;
                main.appendChild(card);
            });

            // Restart Timer n·∫øu ƒë·ªïi ƒë·ªÅ (ho·∫∑c gi·ªØ nguy√™n t√πy logic, ·ªü ƒë√¢y reset cho ƒë·ªÅ m·ªõi)
            startTimer();
        }

        function selectAnswer(qIndex, optIndex) {
            userAnswers[qIndex] = optIndex;
            // Highlight visual
            const inputs = document.getElementsByName(`q${qIndex}`);
            inputs.forEach((inp, idx) => {
                const label = inp.parentElement;
                if (idx === optIndex) {
                    inp.checked = true;
                    label.style.borderColor = 'var(--secondary-color)';
                    label.style.background = '#f7fbff';
                } else {
                    label.style.borderColor = '#e0e0e0';
                    label.style.background = 'white';
                }
            });
        }

        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 3600; // 60 ph√∫t
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto submit
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            const display = document.getElementById('timerDisplay');
            display.innerText = `${m}:${s}`;
            if (timeLeft < 300) display.style.color = 'red'; // C·∫£nh b√°o 5 ph√∫t cu·ªëi
            else display.style.color = 'var(--accent-color)';
        }

        function submitQuiz(auto = false) {
            if (!auto && !confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i?')) return;
            
            clearInterval(timerInterval);
            let score = 0;
            
            currentQuiz.forEach((q, index) => {
                const userAns = userAnswers[index];
                const correctAns = q[4];
                const card = document.getElementById(`q-${index}`);
                const labels = card.querySelectorAll('.option-label');
                const explain = document.getElementById(`explain-${index}`);

                // Hi·ªán gi·∫£i th√≠ch
                explain.style.display = 'block';

                // T√¥ m√†u ƒë√°p √°n
                if (userAns !== undefined) {
                    if (userAns === correctAns) {
                        score++;
                        labels[userAns].classList.add('correct-answer');
                    } else {
                        labels[userAns].classList.add('wrong-answer');
                        labels[correctAns].classList.add('correct-answer');
                    }
                } else {
                    // Ch∆∞a ch·ªçn
                    labels[correctAns].classList.add('correct-answer');
                }
                
                // Disable inputs
                card.querySelectorAll('input').forEach(i => i.disabled = true);
            });

            // Show Score
            document.getElementById('scoreText').innerText = `${score}/50`;
            document.getElementById('scoreMessage').innerText = score >= 40 ? "Xu·∫•t s·∫Øc! üéâ" : (score >= 25 ? "ƒê·∫°t y√™u c·∫ßu üëç" : "C·∫ßn √¥n t·∫≠p th√™m üìö");
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('scoreBoard').style.display = 'block';
            
            // ·∫®n n√∫t n·ªôp
            document.querySelector('.btn-submit').style.display = 'none';
        }

        function closeScore() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('scoreBoard').style.display = 'none';
            window.scrollTo(0, 0);
        }

        function resetQuiz() {
            if(confirm("L√†m l·∫°i s·∫Ω x√≥a h·∫øt k·∫øt qu·∫£ hi·ªán t·∫°i?")) {
                const activeBtn = document.querySelector('.nav-btn.active');
                const key = Object.keys(quizData).find(k => quizData[k] === currentQuiz);
                loadQuiz(key, activeBtn);
                document.querySelector('.btn-submit').style.display = 'inline-block';
            }
        }

        // Auto load Intro (Kh√¥ng load ƒë·ªÅ ngay)
    </script>
</body>
</html>
